(this["webpackJsonpmatch-fun-words-fe"]=this["webpackJsonpmatch-fun-words-fe"]||[]).push([[0],{101:function(e,t,a){e.exports=a(142)},106:function(e,t,a){},107:function(e,t,a){},130:function(e,t,a){},132:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),o=a.n(c),l=(a(106),a(107),a(28)),i=a(32),u=a(13),s=a(12),m=function(e){return{type:"CHANGE_ROLE",role:e}},d=a(18),b=a.n(d),f=a(33),p=a(26),E=a.n(p),v="/login",h="/register",g="/match",O="/",j="/join",w="/card",y="/judge",x="/user",N=function(){var e=Object(f.a)(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:t,pwd:a},e.abrupt("return",E.a.post(x+v,n));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.post(x+h,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=a(181),C=a(86),I=a.n(C),A=a(87),J=a.n(A),D=a(178),P=a(186),G=(a(130),a(83)),W=a.n(G),L=a(173),R=function(e){return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"div-title"},r.a.createElement("span",{className:"rainbow-text"},e.title)),e.options?r.a.createElement("div",{className:"div-option"},r.a.createElement(L.a,{edge:"end",color:"inherit"},r.a.createElement(W.a,null))):r.a.createElement("div",null))},U=a(177),z=Object(U.a)({root:{background:"linear-gradient(263deg, rgba(2,0,36,1) 0%, rgba(79,119,189,1) 45%, rgba(0,212,255,1) 100%)",minWidth:"218px"},label:{color:"whitesmoke"}}),Y=(a(132),function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),m=Object(u.a)(o,2),d=m[0],b=m[1],f=Object(i.g)(),p=Object(s.b)(),E=z();return r.a.createElement(D.a,{className:"page",maxWidth:"md"},r.a.createElement(R,{title:"Match fun words"}),r.a.createElement("div",{className:"page-content"},r.a.createElement(P.a,{id:"username",label:"Username",margin:"normal",variant:"outlined",value:a,onChange:function(e){return c(e.target.value)},InputProps:{startAdornment:r.a.createElement(I.a,null)}}),r.a.createElement("br",null),r.a.createElement(P.a,{id:"password",label:"Password",type:"password",autoComplete:"current-password",margin:"normal",variant:"outlined",value:d,onChange:function(e){return b(e.target.value)},InputProps:{startAdornment:r.a.createElement(J.a,null)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(k.a,{classes:{root:E.root,label:E.label},size:"large",variant:"text",onClick:function(){N(a,d).then((function(e){var t=e.data;null!=t&&(console.log(t),localStorage.setItem("jwt",t.jwt),p({type:"LOGIN",user:t}),f.push("/dashboard"))})).catch((function(e){return console.log(e)}))}},"login"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"redirect-register-div"},"New user?",r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement(l.b,{to:"/register"},"Register now!")))))}),T=a(23),_=a(189),H=a(187),B={email:"",name:"",password:"",surname:"",username:""},F=function(e){return r.a.createElement(H.a,Object.assign({elevation:6,variant:"filled"},e))},M=function(){var e=Object(n.useState)(B),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(u.a)(o,2),s=l[0],m=l[1],d=Object(n.useState)(!1),b=Object(u.a)(d,2),f=b[0],p=b[1],E=Object(i.g)(),v=z();return r.a.createElement(D.a,{className:"page",maxWidth:"md"},r.a.createElement(R,{title:"Join"}),r.a.createElement("div",{className:"page-content"},r.a.createElement(P.a,{id:"username",label:"Username",type:"text",margin:"normal",variant:"outlined",value:a.username,onChange:function(e){e.persist(),c((function(t){return Object(T.a)({},t,{username:e.target.value})}))}}),r.a.createElement("br",null),r.a.createElement(P.a,{id:"email",label:"Email",type:"text",margin:"normal",variant:"outlined",value:a.email,onChange:function(e){e.persist(),c((function(t){return Object(T.a)({},t,{email:e.target.value})}))}}),r.a.createElement("br",null),r.a.createElement(P.a,{id:"name",label:"Name",type:"text",margin:"normal",variant:"outlined",value:a.name,onChange:function(e){e.persist(),c((function(t){return Object(T.a)({},t,{name:e.target.value})}))}}),r.a.createElement("br",null),r.a.createElement(P.a,{id:"surname",label:"Surname",type:"text",margin:"normal",variant:"outlined",value:a.surname,onChange:function(e){e.persist(),c((function(t){return Object(T.a)({},t,{surname:e.target.value})}))}}),r.a.createElement("br",null),r.a.createElement(P.a,{id:"password",label:"Password",type:"password",margin:"normal",variant:"outlined",value:a.password,onChange:function(e){e.persist(),c((function(t){return Object(T.a)({},t,{password:e.target.value})}))}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(k.a,{size:"large",variant:"text",classes:{root:v.root,label:v.label},onClick:function(){S(a).then((function(e){var t=e.data;console.log(t),m((function(){return!0})),p(t)}))}},"Register")),r.a.createElement(_.a,{open:s,autoHideDuration:3e3,onClose:function(){m((function(){return!1})),f&&E.push("/login")}},r.a.createElement(F,{severity:f?"success":"error"},f?"Registrazione effettuata con successo":"Registrazione non andata a buon fine")))},q=function(e){return e.user.username},Q=function(e){return e.user.role},V=g;E.a.interceptors.request.use((function(e){return e.headers.Authorization="Bearer "+localStorage.getItem("jwt"),e}));var $,K=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.post(V+O));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.post(V+"/"+t+j));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.post(V+"/"+t+w));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.post(V+"/"+t+y));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();!function(e){e[e.PLAYER=0]="PLAYER",e[e.JUDGE=1]="JUDGE"}($||($={}));var te=function(e){return{type:"INIT",answers:e}},ae=function(){var e=Object(s.c)(q),t=Object(i.g)(),a=Object(s.b)();return r.a.createElement(D.a,{className:"page",maxWidth:"md"},r.a.createElement(R,{title:"Welcome ".concat(e)}),r.a.createElement("div",{className:"page-content"},r.a.createElement(k.a,{variant:"outlined",color:"primary",onClick:function(){K().then((function(e){var n=e.data;console.log(n),a(m($.JUDGE)),Z(n).then((function(e){console.log(e);var t=e.data;a(te(t))})),t.push("/match/"+n)})).catch((function(e){return console.log(e)}))}},"Create a new match"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(k.a,{variant:"outlined",color:"primary",onClick:function(){t.push("/join")}},"Join a match")))},ne=function(e){var t="";if(e.isAuthenticated||(t=e.authenticationPath),t){return r.a.createElement(i.b,Object.assign({},e,{component:function(){return r.a.createElement(i.a,{to:{pathname:t}})},render:void 0}))}return r.a.createElement(i.b,e)},re=a(39),ce=(a(134),function(e){var t=e.text,a=e.role,n=e.buttonFunction;return r.a.createElement("div",{className:"answer-card-div"},t,r.a.createElement(k.a,{className:"send-btn",variant:"text",color:"primary",onClick:n},a===$.JUDGE?"CHOOSE":"SEND"))}),oe=a(190),le=a(191),ie=(a(135),function(e){var t=e.matchId,a=e.client,c=Object(n.useState)(),o=Object(u.a)(c,2),l=o[0],i=o[1],d=Object(n.useState)([]),b=Object(u.a)(d,2),f=b[0],p=b[1],E=Object(n.useState)(""),v=Object(u.a)(E,2),h=v[0],g=v[1],O=Object(n.useState)(!1),j=Object(u.a)(O,2),w=j[0],y=j[1],x=Object(s.b)();Object(n.useEffect)((function(){ee(t).then((function(e){i((function(){return e.data}))})).catch((function(e){return console.log(e)}))}),[t]),Object(n.useEffect)((function(){if(a.connected){var e=a.subscribe("/game/judge/".concat(t),(function(e){var t=JSON.parse(e.body);p((function(e){return[].concat(Object(re.a)(e),[t])}))})).id;g((function(){return e}))}}),[t,a.connected]);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{className:"judge-card-div"},l?null===l||void 0===l?void 0:l.text.replace("{}","___"):r.a.createElement("div",null))),r.a.createElement("div",{className:"page-content"},f?f.map((function(e,n){return r.a.createElement(ce,{key:n,text:e.text,role:$.JUDGE,buttonFunction:function(){return n=e,console.log(n),a.send("/app/match/".concat(t,"/judge/choose"),{},JSON.stringify(n)),a.unsubscribe(h),void y(!0);var n}})})):r.a.createElement("div",null)),r.a.createElement(oe.a,{onClose:function(){},"aria-labelledby":"simple-dialog-title",open:w},r.a.createElement(le.a,{id:"simple-dialog-title"},"Waiting for other player"),r.a.createElement("div",null,"Vai al prossimo round ",r.a.createElement("br",null),r.a.createElement(k.a,{size:"small",variant:"outlined",onClick:function(){a.disconnect((function(){return console.log("Websocket disconnected")})),x(m($.PLAYER))},color:"primary"},"Next round"))))}),ue=function(e){return e.answer},se=a(184),me=a(182),de=a(183),be=a(58),fe=a(57),pe=function(e){var t=e.matchId,a=e.client,c=Object(s.c)(q),o=Object(s.b)(),l=Object(n.useState)(!1),i=Object(u.a)(l,2),d=i[0],b=i[1],f=Object(n.useState)(!1),p=Object(u.a)(f,2),E=p[0],v=p[1],h=Object(n.useState)((function(){return r.a.createElement("div",null)})),g=Object(u.a)(h,2),O=g[0],j=g[1],w=Object(n.useState)($.PLAYER),y=Object(u.a)(w,2),x=y[0],N=y[1];Object(n.useEffect)((function(){if(a.connected)var e=a.subscribe("/game/player/".concat(t,"/").concat(c),(function(t){var a=JSON.parse(t.body);o({type:"ADD",answer:a}),e.unsubscribe()})),n=a.subscribe("/game/player/".concat(t),(function(e){JSON.parse(e.body).playerId===c?(N($.JUDGE),j((function(){return r.a.createElement("div",null,r.a.createElement(me.a,{fontSize:"large",style:{color:be.a[500]}}),r.a.createElement("br",null),"Complimenti hai vinto")}))):j((function(){return r.a.createElement("div",null,r.a.createElement(de.a,{fontSize:"large",style:{color:fe.a[500]}}),r.a.createElement("br",null),"Peccato, hai perso")})),n.unsubscribe(),v((function(){return!0}))}))}),[t,a.connected,c]);var S=Object(s.c)(ue);return r.a.createElement("div",null,S?S.map((function(e,n){return r.a.createElement(ce,{key:n,text:e.text,role:$.PLAYER,buttonFunction:function(){return function(e){e.playerId=c,console.log(e),a.send("/app/match/".concat(t,"/player/").concat(c,"/card"),{},JSON.stringify(e)),o(function(e){return{type:"DELETE",answer:e}}(e)),b((function(){return!0})),j((function(){return r.a.createElement("div",null,r.a.createElement(se.a,null))}))}(e)}})})):r.a.createElement("div",null),r.a.createElement(oe.a,{onClose:function(){},"aria-labelledby":"simple-dialog-title",open:d},r.a.createElement(le.a,{id:"simple-dialog-title"},"Waiting for other player"),r.a.createElement("div",null,O,r.a.createElement(k.a,{disabled:!E,size:"small",variant:"outlined",onClick:function(){o(m(x)),a.disconnect((function(){return console.log("Websocket disconnected")}))},color:"primary"},"Next round"))))},Ee=a(88),ve=a.n(Ee),he=function(e){console.log(e);var t=e.match.params.matchId,a=Object(s.c)(Q),n=new WebSocket("ws://localhost:8080/match-fun-words"),c=ve.a.over(n);return c.connect({},(function(){console.log("connesso al websocket")})),r.a.createElement(D.a,{className:"page",maxWidth:"md"},r.a.createElement(R,{title:"".concat(a===$.JUDGE?"Giudice":"Giocatore"," ").concat(t)}),a===$.JUDGE?r.a.createElement(ie,{matchId:t,client:c}):r.a.createElement(pe,{matchId:t,client:c}))},ge=a(185),Oe=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(i.g)(),l=Object(s.b)();return r.a.createElement(D.a,{className:"page",maxWidth:"md"},r.a.createElement(R,{title:"Join match"}),r.a.createElement("div",{className:"page-content"},r.a.createElement(P.a,{label:"Match Id",variant:"outlined",onChange:function(e){e.preventDefault(),c(e.target.value)},value:a,InputProps:{startAdornment:r.a.createElement(ge.a,null)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(k.a,{variant:"outlined",color:"primary",onClick:function(){X(a).then((function(e){!0===e.data?(l(m($.PLAYER)),Z(a).then((function(e){console.log(e);var t=e.data;l(te(t))})),o.push("/match/"+a)):console.log("Qualcosa \xe8 andato storto")})).catch((function(e){return console.log(e)}))}},"Join")))},je=function(){var e=Object(s.c)(q);return r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",exact:!0},r.a.createElement(i.a,{to:"/login"})),r.a.createElement(i.b,{path:"/login",exact:!0},r.a.createElement(Y,null)),r.a.createElement(i.b,{path:"/register",exact:!0},r.a.createElement(M,null)),r.a.createElement(ne,{isAuthenticated:""!==e,authenticationPath:"/login",exact:!0,path:"/dashboard",component:ae}),r.a.createElement(ne,{isAuthenticated:""!==e,authenticationPath:"/login",exact:!0,path:"/match/:matchId",component:he}),r.a.createElement(ne,{isAuthenticated:""!==e,authenticationPath:"/login",exact:!0,path:"/join",component:Oe}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var we=a(40),ye=a(89),xe={name:"",surname:"",email:"",username:"",jwt:"",role:$.PLAYER},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(T.a)({},t.user);case"LOGOUT":return Object(T.a)({},xe);case"CHANGE_ROLE":return Object(T.a)({},e,{role:t.role});default:return Object(T.a)({},e)}},Se=[],ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT":return Object(re.a)(t.answers);case"ADD":return Object(re.a)(e.concat(t.answer));case"DELETE":return Object(re.a)(e.filter((function(e){return e.text!==t.answer.text})));default:return Object(re.a)(e)}},Ce=Object(we.createStore)(Object(we.combineReducers)({user:Ne,answer:ke}),Object(ye.composeWithDevTools)());o.a.render(r.a.createElement(s.a,{store:Ce},r.a.createElement(je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[101,1,2]]]);
//# sourceMappingURL=main.e7faa91e.chunk.js.map